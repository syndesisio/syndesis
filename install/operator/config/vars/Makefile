CONTROLLER_GEN_VERSION := v0.6.1
OPERATOR_SDK_VERSION := v1.14.0
KUSTOMIZE_VERSION := v4.1.2
OPM_VERSION := v1.21.0

DEFAULT_VERSION := 1.15.0
DEFAULT_PREVIOUS_VERSION := 1.14.0
DEFAULT_IMAGE := quay.io/syndesis/syndesis-operator
DEFAULT_TAG := $(DEFAULT_VERSION:.0=)
DEFAULT_NAMESPACE := syndesis
DEFAULT_CHANNEL := latest
DEFAULT_CHANNELS := $(DEFAULT_CHANNEL),candidate,stable,$(DEFAULT_VERSION:.0=.x)
DEFAULT_CSV := manifests/bases/syndesis.clusterserviceversion.yaml
BUNDLE_INFIX := bundle

DB_IMAGE := centos/postgresql-10-centos7
PACKAGE := syndesis
CSV_SUPPORT := Syndesis
CSV_DISPLAY_NAME := Syndesis Operator
CSV_ICON :=  PHN2ZyBpZD0iYXJ0d29yayIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0Ij48c2NyaXB0IHhtbG5zPSIiIGlkPSJfX2dhT3B0T3V0RXh0ZW5zaW9uIi8+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiM5YWRkZTg7fS5jbHMtMntmaWxsOiM0OWJhZGM7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5pY29uX2Z1bGxfMTAyNHB4PC90aXRsZT48cG9seWdvbiBjbGFzcz0iY2xzLTEiIHBvaW50cz0iNTI3Ljk1IDM3MC40MSAxMzEuODQgNTU4LjcxIDQ5Ni4wNSA2NTMuNTkgODkyLjE2IDQ2NS4yOSA1MjcuOTUgMzcwLjQxIi8+PHBvbHlnb24gY2xhc3M9ImNscy0yIiBwb2ludHM9Ijg5Mi4xNiA0NjUuMjkgODkyLjE2IDQ2NS4yOSA0OTYuMDUgNjUzLjU5IDk5MS4xNyA3ODIuNTYgODkyLjE2IDQ2NS4yOSIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSI2MzEuMzEgMzIxLjI4IDUzMi4zIDQgMzIuODMgMjQxLjQ0IDUyNy45NSAzNzAuNDEgNjMxLjMxIDMyMS4yOCIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxMzEuODQgNTU4LjcxIDUyNy45NSAzNzAuNDEgMzIuODMgMjQxLjQ0IDMyLjgzIDI0MS40NCAxMzEuODQgNTU4LjcxIi8+PHBvbHlnb24gY2xhc3M9ImNscy0yIiBwb2ludHM9Ijc3NC4zNCA2Ny4wNSA1MzIuMyA0IDYzMS4zMSAzMjEuMjggODczLjM2IDM4NC4zMyA3NzQuMzQgNjcuMDUiLz48cG9seWdvbiBjbGFzcz0iY2xzLTIiIHBvaW50cz0iMTUwLjY0IDYzOS42NyAyNDkuNjYgOTU2Ljk1IDQ5MS43IDEwMjAgNDkxLjcgMTAyMCAzOTIuNjkgNzAyLjcyIDM5Mi42OSA3MDIuNzIgMTUwLjY0IDYzOS42NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSI5OTEuMTcgNzgyLjU2IDQ5Ni4wNSA2NTMuNTkgMzkyLjY5IDcwMi43MiA0OTEuNyAxMDIwIDk5MS4xNyA3ODIuNTYiLz48L3N2Zz4=

#
# Vars that can be overridden by external env vars
#
VERSION ?= $(DEFAULT_VERSION)
PREVIOUS_VERSION ?= $(DEFAULT_PREVIOUS_VERSION)
DEBUG ?= false
IMAGE ?= $(DEFAULT_IMAGE)
TAG ?= $(DEFAULT_TAG)
NAMESPACE ?= $(DEFAULT_NAMESPACE)
KUBE_USER ?= developer
LEGACY ?= false

CHANNELS ?= $(DEFAULT_CHANNELS)
# Default bundle image tag
BUNDLE_IMG ?= $(IMAGE)-$(BUNDLE_INFIX):$(VERSION)
# Options for 'bundle-build'
ifneq ($(origin CHANNELS), undefined)
BUNDLE_CHANNELS := --channels=$(CHANNELS)
endif
ifneq ($(origin DEFAULT_CHANNEL), undefined)
BUNDLE_DEFAULT_CHANNEL := --default-channel=$(DEFAULT_CHANNEL)
endif
ifneq ($(origin PACKAGE), undefined)
BUNDLE_PACKAGE := --package=$(PACKAGE)
endif
BUNDLE_METADATA_OPTS ?= $(BUNDLE_CHANNELS) $(BUNDLE_DEFAULT_CHANNEL) $(BUNDLE_PACKAGE)

BUNDLE_DIR := bundle
CATALOG := catalog
PKG := ../pkg
CRD := crd/bases
MANAGER := manager
MANIFESTS := manifests
GRANT := rbac-grant
ROLE := rbac-role
TIMESTAMP=$(shell date -u '+%F %T %Z')

CLUSTER_ROLE_KAFKA := cluster-role-kafka
CLUSTER_ROLE_PUBLIC_API := cluster-role-public-api

CSV_NAME := $(PACKAGE).v$(VERSION)
CSV_REPLACES := $(PACKAGE).v$(PREVIOUS_VERSION)
CSV_FILENAME := $(PACKAGE).clusterserviceversion.yaml
CSV_PATH := $(MANIFESTS)/bases/$(CSV_FILENAME)

SRC_CATALOG := registry.redhat.io/redhat/redhat-operator-index:v4.11
